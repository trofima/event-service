"use strict";var ServiceEvent=function(){function t(t,e,n){this.type=t,this.data=e,this.rawEvent=n}return t}();exports.ServiceEvent=ServiceEvent;var EventService=function(){function t(){this.actions=new Map}return t.prototype.on=function(t,e,n,i){var r=this;void 0===n&&(n=null),void 0===i&&(i=!1);var o=this.decorateAction({action:e,context:n,shouldCallOnce:i,typeString:t}),c=t.match(this.getSplitter());c.forEach(function(t){return r.bind(t,o)})},t.prototype.once=function(t,e,n){void 0===n&&(n=null),this.on(t,e,n,!0)},t.prototype.trigger=function(t,e,n){var i=this,r=t.match(this.getSplitter());r.forEach(function(t){return i.triggerOne(t,new ServiceEvent(t,e,n))}),this.triggerOne("all",new ServiceEvent("all",e,n))},t.prototype.off=function(t,e){var n=this,i=t.match(this.getSplitter());i.forEach(function(t){return n.offOne(t,e)})},t.prototype.decorateAction=function(t){var e=t.action,n=t.context,i=t.shouldCallOnce,r=t.typeString,o=n?e.bind(n):e;return i?this.createOneTimeAction(o,r):o},t.prototype.createOneTimeAction=function(t,e){var n=this,i=function(r){t(r),n.off(e,i)};return i},t.prototype.bind=function(t,e){var n=this.actions.has(t)?this.actions.get(t):[];this.actions.set(t,n.concat([e]))},t.prototype.triggerOne=function(t,e){this.actions.has(t)?this.fire(t,e):"all"!==t&&this.warnUregistered(t)},t.prototype.fire=function(t,e){this.actions.get(t).forEach(function(t){return t(e)})},t.prototype.offOne=function(t,e){this.actions.has(t)?this.unbind(t,e):this.warnUregistered(t)},t.prototype.unbind=function(t,e){if(e){var n=this.actions.get(t);this.actions.set(t,n.filter(function(t){return t!==e}))}else this.actions["delete"](t)},t.prototype.getSplitter=function(){return/[^,\s]+/g},t.prototype.warnUregistered=function(t){console.warn('There is no event of type "'+t+'" registered')},t}();exports.EventService=EventService;